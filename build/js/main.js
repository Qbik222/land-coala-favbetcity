"use strict";

var playBtn = document.querySelector('.bonus__main-wheel-btn'),
  main = document.querySelector('.bonus__main'),
  wheel = document.querySelector('.bonus__main-wheel-reel'),
  overlay = document.querySelector('.bonus__overlay'),
  popupFirst = document.querySelector('.bonus__firstWin'),
  popupFirstBtn = document.querySelector('.bonus__firstWin-btn'),
  popupSecond = document.querySelector('.bonus__secondWin'),
  overflow = document.querySelector('body'),
  wrapper = document.querySelector('.bonus'),
  copyBtn = document.querySelector('.bonus__secondWin-code-btn'),
  bonusStart = document.querySelector('.bonus__start'),
  bonusText = document.querySelector('.bonus__text'),
  audioCoin = document.querySelector('.audio-coins'),
  audioFirework = document.querySelector('.audio-firework'),
  audioMain = document.querySelector('.audio-main'),
  audioWheel = document.querySelector('.audio-wheel'),
  btnVolume = document.querySelector('.bonus__music'),
  btnVolumeImg = document.querySelector('.bonus__music-img'),
  body = document.querySelector('body');
audioMain.volume = 0.35;
audioFirework.volume = 0.6;
audioCoin.volume = 0.6;
function scrollToTop() {
  var currentPosition = document.documentElement.scrollTop || document.body.scrollTop;
  if (currentPosition > 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, currentPosition - currentPosition / 8);
  }
}
btnVolume.addEventListener('click', function () {
  if (btnVolume.classList.contains('off')) {
    btnVolume.classList.remove('off');
    btnVolume.classList.add('on');
    audioMain.play();
    audioFirework.play();
    btnVolumeImg.setAttribute('src', 'img/sound-on.svg');
  } else {
    btnVolume.classList.remove('on');
    btnVolume.classList.add('off');
    audioMain.pause();
    audioMain.currentTime = 0;
    audioFirework.pause();
    audioFirework.currentTime = 0;
    audioWheel.pause();
    audioWheel.currentTime = 0;
    audioCoin.pause();
    audioCoin.currentTime = 0;
    btnVolumeImg.setAttribute('src', 'img/sound-off.svg');
  }
});
setTimeout(function () {
  bonusStart.classList.add('_active');
  main.classList.add('_active');
  setTimeout(function () {
    bonusText.classList.add('_visible');
  }, 1200);
}, 3500);
copyBtn.addEventListener('click', function () {
  copyBtn.classList.add('_copy');
  setTimeout(function () {
    copyBtn.classList.remove('_copy');
  }, 2000);
  var textToCopy = "egyptsem";
  // Копируем текст в буфер обмена
  navigator.clipboard.writeText(textToCopy).then(function () {
    console.log('copy code');
  })["catch"](function (error) {
    console.error('error', error);
  });
});
playBtn.addEventListener('click', function () {
  runFirstRotation();
});
function runFirstRotation() {
  scrollToTop();
  btnVolume.classList.remove('off');
  btnVolume.classList.add('on');
  btnVolumeImg.setAttribute('src', 'img/sound-on.svg');
  audioMain.play();
  audioFirework.play();
  audioWheel.play();
  wheel.classList.add('reel-rotation-first');
  playBtn.classList.remove('pulse-btn');
  playBtn.style.cursor = 'default';
  wrapper.style.pointerEvents = 'none';
  wrapper.style.overflow = 'hidden';
  body.style.overflow = 'hidden';
  setTimeout(function () {
    doAfterFirstRotation();
  }, 6000);
}
function doAfterFirstRotation() {
  audioCoin.play();
  wheel.style.transform = 'rotate(992deg)';
  wheel.classList.remove('reel-rotation-first');
  displayPopup(popupFirst);
  wrapper.style.pointerEvents = 'auto';
  overflow.style.overflow = 'hidden';
}
popupFirstBtn.addEventListener('click', function () {
  popupFirst.classList.add('_opacity');
  popupSecond.classList.remove('_opacity');
});
function displayPopup(popup) {
  overlay.classList.remove('opacity-overlay');
  popup.classList.remove('hide');
}
window.addEventListener('orientationchange', function () {
  window.location.reload();
});
(function () {
  var url = new URL(window.location.href);
  var params = ['l', 'utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'param1', 'param2'];
  var linkParams = ['affid', 'cpaid']; // ищем в url redirectUrl в url:

  if (url.searchParams.has('redirectUrl')) {
    var redirectUrl = new URL(url.searchParams.get('redirectUrl'));
    if (redirectUrl.href.match(/\//g).length === 4 && redirectUrl.searchParams.get('l')) {
      //если ссылка в ссылка redirectUrl корректная
      localStorage.setItem('redirectUrl', redirectUrl.href); // указываем точкой входа домен с протоколом из redirectUrl
    }
  } /////////

  params.forEach(function (param) {
    if (url.searchParams.has(param)) localStorage.setItem(param, url.searchParams.get(param));
  });
  linkParams.forEach(function (linkParam) {
    if (url.searchParams.has(linkParam)) localStorage.setItem(linkParam, url.searchParams.get(linkParam));
  });
  window.addEventListener('click', function (e) {
    var link,
      parent = e.target.closest('a');
    if (parent.getAttribute('href') !== 'https://tds.favbet.partners') {
      return;
    }
    parent && (e.preventDefault(), localStorage.getItem("redirectUrl") ? link = new URL(localStorage.getItem("redirectUrl")) : (link = new URL(parent.href), affid = localStorage.getItem('affid'), cpaid = localStorage.getItem('cpaid'), affid && cpaid && (link.pathname = '/' + affid + '/' + cpaid)), params.forEach(function (param) {
      url.searchParams.has(param) && link.searchParams.set(param, localStorage.getItem(param));
    }), document.location.href = link);
  });
})();
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsicGxheUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1haW4iLCJ3aGVlbCIsIm92ZXJsYXkiLCJwb3B1cEZpcnN0IiwicG9wdXBGaXJzdEJ0biIsInBvcHVwU2Vjb25kIiwib3ZlcmZsb3ciLCJ3cmFwcGVyIiwiY29weUJ0biIsImJvbnVzU3RhcnQiLCJib251c1RleHQiLCJhdWRpb0NvaW4iLCJhdWRpb0ZpcmV3b3JrIiwiYXVkaW9NYWluIiwiYXVkaW9XaGVlbCIsImJ0blZvbHVtZSIsImJ0blZvbHVtZUltZyIsImJvZHkiLCJ2b2x1bWUiLCJzY3JvbGxUb1RvcCIsImN1cnJlbnRQb3NpdGlvbiIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjcm9sbFRvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkIiwicGxheSIsInNldEF0dHJpYnV0ZSIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJzZXRUaW1lb3V0IiwidGV4dFRvQ29weSIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJydW5GaXJzdFJvdGF0aW9uIiwic3R5bGUiLCJjdXJzb3IiLCJwb2ludGVyRXZlbnRzIiwiZG9BZnRlckZpcnN0Um90YXRpb24iLCJ0cmFuc2Zvcm0iLCJkaXNwbGF5UG9wdXAiLCJwb3B1cCIsImxvY2F0aW9uIiwicmVsb2FkIiwidXJsIiwiVVJMIiwiaHJlZiIsInBhcmFtcyIsImxpbmtQYXJhbXMiLCJzZWFyY2hQYXJhbXMiLCJoYXMiLCJyZWRpcmVjdFVybCIsImdldCIsIm1hdGNoIiwibGVuZ3RoIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImZvckVhY2giLCJwYXJhbSIsImxpbmtQYXJhbSIsImUiLCJsaW5rIiwicGFyZW50IiwidGFyZ2V0IiwiY2xvc2VzdCIsImdldEF0dHJpYnV0ZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0SXRlbSIsImFmZmlkIiwiY3BhaWQiLCJwYXRobmFtZSIsInNldCJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFNQSxPQUFPLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLHdCQUF3QixDQUFDO0VBQzFEQyxJQUFJLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGNBQWMsQ0FBQztFQUM3Q0UsS0FBSyxHQUFHSCxRQUFRLENBQUNDLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQztFQUN6REcsT0FBTyxHQUFHSixRQUFRLENBQUNDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQztFQUNuREksVUFBVSxHQUFHTCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztFQUN2REssYUFBYSxHQUFHTixRQUFRLENBQUNDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQztFQUM5RE0sV0FBVyxHQUFHUCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN6RE8sUUFBUSxHQUFHUixRQUFRLENBQUNDLGFBQWEsQ0FBQyxNQUFNLENBQUM7RUFDekNRLE9BQU8sR0FBR1QsUUFBUSxDQUFDQyxhQUFhLENBQUMsUUFBUSxDQUFDO0VBQzFDUyxPQUFPLEdBQUdWLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLDRCQUE0QixDQUFDO0VBQzlEVSxVQUFVLEdBQUdYLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGVBQWUsQ0FBQztFQUNwRFcsU0FBUyxHQUFHWixRQUFRLENBQUNDLGFBQWEsQ0FBQyxjQUFjLENBQUM7RUFDbERZLFNBQVMsR0FBR2IsUUFBUSxDQUFDQyxhQUFhLENBQUMsY0FBYyxDQUFDO0VBQ2xEYSxhQUFhLEdBQUdkLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGlCQUFpQixDQUFDO0VBQ3pEYyxTQUFTLEdBQUdmLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLGFBQWEsQ0FBQztFQUNqRGUsVUFBVSxHQUFHaEIs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LENBQUMsQ0FBQztBQUNOLENBQUMsRUFBRSxDQUFDO0FDN0tKIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9udXNfX21haW4td2hlZWwtYnRuJyksXG4gICAgICBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvbnVzX19tYWluJyksXG4gICAgICB3aGVlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251c19fbWFpbi13aGVlbC1yZWVsJyksXG4gICAgICBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvbnVzX19vdmVybGF5JyksXG4gICAgICBwb3B1cEZpcnN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvbnVzX19maXJzdFdpbicpLFxuICAgICAgcG9wdXBGaXJzdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251c19fZmlyc3RXaW4tYnRuJyksXG4gICAgICBwb3B1cFNlY29uZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251c19fc2Vjb25kV2luJyksXG4gICAgICBvdmVyZmxvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICAgIHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9udXMnKSxcbiAgICAgIGNvcHlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9udXNfX3NlY29uZFdpbi1jb2RlLWJ0bicpLFxuICAgICAgYm9udXNTdGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251c19fc3RhcnQnKSxcbiAgICAgIGJvbnVzVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib251c19fdGV4dCcpLFxuICAgICAgYXVkaW9Db2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1ZGlvLWNvaW5zJyksXG4gICAgICBhdWRpb0ZpcmV3b3JrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF1ZGlvLWZpcmV3b3JrJyksXG4gICAgICBhdWRpb01haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXVkaW8tbWFpbicpLFxuICAgICAgYXVkaW9XaGVlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdWRpby13aGVlbCcpLFxuICAgICAgYnRuVm9sdW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvbnVzX19tdXNpYycpLFxuICAgICAgYnRuVm9sdW1lSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvbnVzX19tdXNpYy1pbWcnKSxcbiAgICAgIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcblxuYXVkaW9NYWluLnZvbHVtZSA9IDAuMzVcbmF1ZGlvRmlyZXdvcmsudm9sdW1lID0gMC42XG5hdWRpb0NvaW4udm9sdW1lID0gMC42XG5cbmZ1bmN0aW9uIHNjcm9sbFRvVG9wKCkge1xuICAgIGNvbnN0IGN1cnJlbnRQb3NpdGlvbiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgaWYgKGN1cnJlbnRQb3NpdGlvbiA+IDApIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxUb1RvcCk7XG4gICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBjdXJyZW50UG9zaXRpb24gLSBjdXJyZW50UG9zaXRpb24gLyA4KTtcbiAgICB9XG59XG5cbmJ0blZvbHVtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZihidG5Wb2x1bWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdvZmYnKSl7XG4gICAgICAgIGJ0blZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCdvZmYnKVxuICAgICAgICBidG5Wb2x1bWUuY2xhc3NMaXN0LmFkZCgnb24nKVxuICAgICAgICBhdWRpb01haW4ucGxheSgpXG4gICAgICAgIGF1ZGlvRmlyZXdvcmsucGxheSgpXG4gICAgICAgIGJ0blZvbHVtZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc291bmQtb24uc3ZnJylcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0blZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCdvbicpXG4gICAgICAgIGJ0blZvbHVtZS5jbGFzc0xpc3QuYWRkKCdvZmYnKVxuICAgICAgICBhdWRpb01haW4ucGF1c2UoKVxuICAgICAgICBhdWRpb01haW4uY3VycmVudFRpbWUgPSAwO1xuICAgICAgICBhdWRpb0ZpcmV3b3JrLnBhdXNlKClcbiAgICAgICAgYXVkaW9GaXJld29yay5jdXJyZW50VGltZSA9IDA7XG4gICAgICAgIGF1ZGlvV2hlZWwucGF1c2UoKVxuICAgICAgICBhdWRpb1doZWVsLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgYXVkaW9Db2luLnBhdXNlKClcbiAgICAgICAgYXVkaW9Db2luLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgYnRuVm9sdW1lSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zb3VuZC1vZmYuc3ZnJylcbiAgICB9XG59KVxuXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpe1xuICAgIGJvbnVzU3RhcnQuY2xhc3NMaXN0LmFkZCgnX2FjdGl2ZScpXG4gICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdfYWN0aXZlJylcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpe1xuICAgICAgICBib251c1RleHQuY2xhc3NMaXN0LmFkZCgnX3Zpc2libGUnKVxuICAgIH0sIDEyMDApXG5cbn0sIDM1MDApO1xuXG5jb3B5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvcHlCdG4uY2xhc3NMaXN0LmFkZCgnX2NvcHknKVxuICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgY29weUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdfY29weScpXG4gICAgfSwgMjAwMClcbiAgICBsZXQgdGV4dFRvQ29weSA9IFwiZWd5cHRzZW1cIjtcbiAgICAvLyDQmtC+0L/QuNGA0YPQtdC8INGC0LXQutGB0YIg0LIg0LHRg9GE0LXRgCDQvtCx0LzQtdC90LBcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0VG9Db3B5KVxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb3B5IGNvZGUnKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbn0pXG5cbnBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcnVuRmlyc3RSb3RhdGlvbigpXG59KVxuXG5mdW5jdGlvbiBydW5GaXJzdFJvdGF0aW9uKCkge1xuICAgIHNjcm9sbFRvVG9wKClcbiAgICBidG5Wb2x1bWUuY2xhc3NMaXN0LnJlbW92ZSgnb2ZmJylcbiAgICBidG5Wb2x1bWUuY2xhc3NMaXN0LmFkZCgnb24nKVxuICAgIGJ0blZvbHVtZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc291bmQtb24uc3ZnJylcbiAgICBhdWRpb01haW4ucGxheSgpXG4gICAgYXVkaW9GaXJld29yay5wbGF5KClcbiAgICBhdWRpb1doZWVsLnBsYXkoKVxuICAgIHdoZWVsLmNsYXNzTGlzdC5hZGQoJ3JlZWwtcm90YXRpb24tZmlyc3QnKVxuICAgIHBsYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHVsc2UtYnRuJylcbiAgICBwbGF5QnRuLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0J1xuICAgIHdyYXBwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJ1xuICAgIHdyYXBwZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJ1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb0FmdGVyRmlyc3RSb3RhdGlvbigpXG4gICAgfSwgNjAwMClcbn1cblxuZnVuY3Rpb24gZG9BZnRlckZpcnN0Um90YXRpb24oKSB7XG4gICAgYXVkaW9Db2luLnBsYXkoKVxuICAgIHdoZWVsLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoOTkyZGVnKSdcbiAgICB3aGVlbC5jbGFzc0xpc3QucmVtb3ZlKCdyZWVsLXJvdGF0aW9uLWZpcnN0JylcbiAgICBkaXNwbGF5UG9wdXAocG9wdXBGaXJzdClcbiAgICB3cmFwcGVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0bydcbiAgICBvdmVyZmxvdy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG59XG5cblxucG9wdXBGaXJzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwb3B1cEZpcnN0LmNsYXNzTGlzdC5hZGQoJ19vcGFjaXR5JylcbiAgICBwb3B1cFNlY29uZC5jbGFzc0xpc3QucmVtb3ZlKCdfb3BhY2l0eScpXG59KVxuXG5mdW5jdGlvbiBkaXNwbGF5UG9wdXAocG9wdXApIHtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ29wYWNpdHktb3ZlcmxheScpXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsICgpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn0pO1xuXG5cblxuXG5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgdmFyIHBhcmFtcyA9IFsnbCcsICd1dG1fc291cmNlJywgJ3V0bV9tZWRpdW0nLCAndXRtX2NhbXBhaWduJywgJ3V0bV90ZXJtJywgJ3V0bV9jb250ZW50JywgJ3BhcmFtMScsICdwYXJhbTInXTtcbiAgICB2YXIgbGlua1BhcmFtcyA9IFsnYWZmaWQnLCAnY3BhaWQnXTsgLy8g0LjRidC10Lwg0LIgdXJsIHJlZGlyZWN0VXJsINCyIHVybDpcblxuICAgIGlmICh1cmwuc2VhcmNoUGFyYW1zLmhhcygncmVkaXJlY3RVcmwnKSkge1xuICAgICAgICB2YXIgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdyZWRpcmVjdFVybCcpKTtcblxuICAgICAgICBpZiAocmVkaXJlY3RVcmwuaHJlZi5tYXRjaCgvXFwvL2cpLmxlbmd0aCA9PT0gNCAmJiByZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuZ2V0KCdsJykpIHtcbiAgICAgICAgICAgIC8v0LXRgdC70Lgg0YHRgdGL0LvQutCwINCyINGB0YHRi9C70LrQsCByZWRpcmVjdFVybCDQutC+0YDRgNC10LrRgtC90LDRj1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlZGlyZWN0VXJsJywgcmVkaXJlY3RVcmwuaHJlZik7IC8vINGD0LrQsNC30YvQstCw0LXQvCDRgtC+0YfQutC+0Lkg0LLRhdC+0LTQsCDQtNC+0LzQtdC9INGBINC/0YDQvtGC0L7QutC+0LvQvtC8INC40LcgcmVkaXJlY3RVcmxcbiAgICAgICAgfVxuICAgIH0gLy8vLy8vLy8vXG5cblxuICAgIHBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMocGFyYW0pKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwYXJhbSwgdXJsLnNlYXJjaFBhcmFtcy5nZXQocGFyYW0pKTtcbiAgICB9KTtcbiAgICBsaW5rUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKGxpbmtQYXJhbSkge1xuICAgICAgICBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMobGlua1BhcmFtKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0obGlua1BhcmFtLCB1cmwuc2VhcmNoUGFyYW1zLmdldChsaW5rUGFyYW0pKTtcbiAgICB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgbGluayxcbiAgICAgICAgICAgIHBhcmVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcblxuICAgICAgICBpZiAocGFyZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpICE9PSAnaHR0cHM6Ly90ZHMuZmF2YmV0LnBhcnRuZXJzJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50ICYmIChlLnByZXZlbnREZWZhdWx0KCksXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlZGlyZWN0VXJsXCIpXG4gICAgICAgICAgICAgICAgPyBsaW5rID0gbmV3IFVSTChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlZGlyZWN0VXJsXCIpKVxuICAgICAgICAgICAgICAgIDogKGxpbmsgPSBuZXcgVVJMKHBhcmVudC5ocmVmKSxcbiAgICAgICAgICAgICAgICAgICAgYWZmaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWZmaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgY3BhaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3BhaWQnKSxcbiAgICAgICAgICAgICAgICBhZmZpZCAmJiBjcGFpZCAmJiAobGluay5wYXRobmFtZSA9ICcvJyArIGFmZmlkICsgJy8nICsgY3BhaWQpKSwgcGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKVxuICAgICAgICB7XG4gICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkgJiYgbGluay5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwYXJhbSkpO1xuICAgICAgICB9KSwgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGxpbmspO1xuICAgIH0pO1xufSkoKTtcblxuXG4iLCIiXX0=
